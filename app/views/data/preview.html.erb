<h1 class="heading-large">Preview your picker component</h1>

<div class="form-group">
  <%= label_tag(:key, "Start typing a "+ @register['register'] + " name", for: "data-picker") %>
  <div id="picker" class="typeahead-wrapper"></div>
</div>

<p>
  <a class="button" href="/data/download" role="button">Get the code</a>
</p>

<script type="text/javascript" src="https://unpkg.com/lodash@4.17.4"></script>
<script type="text/javascript" src="https://unpkg.com/jquery@1.11.3"></script>
<script type="text/javascript" src="https://unpkg.com/corejs-typeahead@1.1.1/dist/bloodhound.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/openregister/rails-picker-example/guide-data-file/public/suggestion-engine.js"></script>
<script type="text/javascript" src="https://unpkg.com/accessible-typeahead@0.4.0"></script>

<script type="text/javascript">
    var id = 'data-picker'
    var pathToGraph = '/assets/picker-data.json'
    var select = $('#picker')
    var container = $('<div class="form-control-1-2"></div>')
    select.after(container)
    AccessibleTypeahead({
        element: container[0],
        id: id,
        source: locationPickerSuggestions(pathToGraph)
    });
</script>

